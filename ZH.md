# Fast Image Cleaner

中文 / [EN](./README.md)

此插件可以快速删除笔记中的图片（或视频，录音，文件.....）附件及移除引用链接通过右键图片点击上下文菜单选项。

## 演示

// 功能已经更新,等待..........



## 特性

特性简介：

1. 右键图片删除图片附件及引用链接，视情况自动删除附件文件夹

2. 文件列表中右键删除笔记同时自动删除引用的附件，视情况自动删除附件文件夹

   

特性详情：

- 删除图片支持 `markdown `和 `wiki `链接风格的链接
- 支持 三种不同格式的**内部链接类型** （[详情](https://help.obsidian.md/Linking+notes+and+files/Internal+links)）
  1. 尽可能简短的形式
  2. 基于当前笔记的相对路径
  3. 基于仓库根目录的绝对路径
- 支持设置图片删除后的处理方式：① 移动到系统回收站 ； ② 移动到 obsidian trash ; ③ 永久删除

- 除了支持 img 类型的附件，更多类型附件文件，如图片，视频，录音，文件.....（目前不支持右键删除`PDF`附件）

  1. img 类型: img、gif、png、jpeg，svg， bmp...

  1. file 类型: docx、pptx、html、epub...

  1. media 类型: mp4、mkv...



> 删除图片附件及引用链接情况说明：
>
> 1. 仅被当前笔记引用且**一次**，则直接删除图片，同时移除链接。
> 2. 仅被当前笔记引用且**多次**，则弹出提示窗口，要求用户手动移除链接，不删除图片。（避免图片被错误删除）
> 3. 被**多个笔记**引用，则弹出提示窗口，用户可点击`close`按钮继续移除**当前文档**中的图片引用链接，不删除图片。（避免图片被错误删除）
>
> 删除笔记同时自动删除引用的附件说明：
>
> 1. 如果附件被其他笔记也引用，则不删除。
> 2. 如果附件仅被当前**需被删除的笔记**引用一次或多次，则删除。
> 3. 删除方式：通过插件提供的命令删除 ; 文件列表右键菜单删除
>
> 视情况自动删除附件文件夹说明：
>
> - 当且仅当被删除的笔记中引用的（图片）附件被当前笔记引用一次，且删除附件文件后，附件文件夹下没有内容时删除附件的父级目录（一般为附件文件夹）



## 安装

### 从插件市场安装

直接从插件市场安装，输入`Fast Image cleaner`。

### 从 brat 安装

👦 添加 `martinniee/Obsidian-fast-image-cleaner` 到 BRAT

### 手动安装

方式

-   方式 1：进入 release 页面，下载`.zip`压缩包
-   方式 2：下载并将三个文件（`main.js`、`manifest.json`、`style.css`）提取并放到`<your_vault>/.obsidian/plugins/Obsidian-fast-image-cleaner `文件夹中。

## 使用

1. 安装并启用插件
2. 在**阅读模式**或者**实时预览模式**鼠标右键图片，在弹出的菜单项目中，点击删除选项

### 删除目的设置

![image-20230209180042264](assets/README-images/image-20230209180042264.png)

请确保你在"Fast Images Cleaner Settings" 下选择了被删除图片的目的地。你有 3 个选项。

1. **移动到黑曜石垃圾桶** - 文件将被移动到黑曜石保险库下的`.trash`。
2. **移动到系统垃圾箱** - 文件将被移动到操作系统垃圾箱。
3. **永久删除** - 文件将被永久销毁。你将不能再恢复了

### 删除方式

#### 删除附件及链接

(1)实时预览模式下

![image-20230215115818647](assets/ZH-images/image-20230215115818647.png)

(2)阅读模式下

![image-20230215115818647](assets/ZH-images/image-20230215115818647.png)

## 开发

这个插件遵循 [Obsidian Sample Plugin](https://github.com/obsidianmd/obsidian-sample-plugin) 插件的结构，请看那里的进一步细节。

## 给我充电

❤ 如果你喜欢使用 Obsidian-Fast-Image-Cleaner，那么请支持我的工作，请给我充电。

https://afdian.net/a/nathanel 或者



<img src="assets/ZH-images/微信支付宝二合一收款码.jpg" alt="微信支付宝二合一收款码" style="zoom: 33%;" />

## 计划

-   [ ] 实现任意类型嵌入附件右键显示在文件列表菜单选项
